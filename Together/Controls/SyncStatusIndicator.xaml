<UserControl x:Class="Together.Controls.SyncStatusIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <Border Background="{DynamicResource MaterialDesignPaper}"
            BorderBrush="{DynamicResource MaterialDesignDivider}"
            BorderThickness="0,0,0,1"
            Padding="16,12"
            Visibility="{Binding IsSyncing, Converter={StaticResource BooleanToVisibilityConverter}}">
        
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Syncing icon -->
            <ProgressBar Grid.Column="0"
                        Style="{StaticResource MaterialDesignCircularProgressBar}"
                        Value="0"
                        IsIndeterminate="True"
                        Width="24"
                        Height="24"
                        Margin="0,0,12,0"/>
            
            <!-- Sync status text -->
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="Syncing changes..."
                          FontSize="14"
                          FontWeight="Medium"
                          Foreground="{DynamicResource MaterialDesignBody}"/>
                
                <TextBlock Margin="0,4,0,0"
                          FontSize="12"
                          Foreground="{DynamicResource MaterialDesignBodyLight}">
                    <Run Text="{Binding CompletedOperations, Mode=OneWay}"/>
                    <Run Text="of"/>
                    <Run Text="{Binding TotalOperations, Mode=OneWay}"/>
                    <Run Text="operations"/>
                </TextBlock>
                
                <TextBlock Text="{Binding CurrentOperation}"
                          Margin="0,2,0,0"
                          FontSize="11"
                          FontStyle="Italic"
                          Foreground="{DynamicResource MaterialDesignBodyLight}"
                          Visibility="{Binding CurrentOperation, Converter={StaticResource StringToVisibilityConverter}}"/>
            </StackPanel>
            
            <!-- Progress percentage -->
            <TextBlock Grid.Column="2"
                      Text="{Binding ProgressPercentage, StringFormat='{}{0}%'}"
                      FontSize="16"
                      FontWeight="Bold"
                      Foreground="{DynamicResource PrimaryHueMidBrush}"
                      VerticalAlignment="Center"/>
        </Grid>
    </Border>
</UserControl>
