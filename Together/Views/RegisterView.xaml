<UserControl x:Class="Together.Presentation.Views.RegisterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             Background="{DynamicResource MaterialDesignPaper}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <materialDesign:Card Grid.Row="1" 
                            Padding="32" 
                            MaxWidth="400"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center">
            <StackPanel>
                <!-- Title -->
                <TextBlock Text="Create Account" 
                          Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,8"/>
                
                <TextBlock Text="Join Together today" 
                          Style="{StaticResource MaterialDesignBody2TextBlock}"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,24"
                          Foreground="{DynamicResource MaterialDesignBodyLight}"/>

                <!-- Username Field -->
                <TextBox materialDesign:HintAssist.Hint="Username"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                        Margin="0,0,0,4"/>
                
                <TextBlock Text="{Binding UsernameError}"
                          Foreground="{DynamicResource MaterialDesignValidationErrorBrush}"
                          FontSize="12"
                          Margin="0,0,0,12"
                          TextWrapping="Wrap"
                          Visibility="{Binding UsernameError, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Email Field -->
                <TextBox materialDesign:HintAssist.Hint="Email"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                        Margin="0,0,0,4"/>
                
                <TextBlock Text="{Binding EmailError}"
                          Foreground="{DynamicResource MaterialDesignValidationErrorBrush}"
                          FontSize="12"
                          Margin="0,0,0,12"
                          TextWrapping="Wrap"
                          Visibility="{Binding EmailError, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Password Field -->
                <PasswordBox x:Name="PasswordBox"
                            materialDesign:HintAssist.Hint="Password"
                            Style="{StaticResource MaterialDesignOutlinedPasswordBox}"
                            Margin="0,0,0,4"
                            PasswordChanged="PasswordBox_OnPasswordChanged"/>
                
                <TextBlock Text="{Binding PasswordError}"
                          Foreground="{DynamicResource MaterialDesignValidationErrorBrush}"
                          FontSize="12"
                          Margin="0,0,0,12"
                          TextWrapping="Wrap"
                          Visibility="{Binding PasswordError, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Confirm Password Field -->
                <PasswordBox x:Name="ConfirmPasswordBox"
                            materialDesign:HintAssist.Hint="Confirm Password"
                            Style="{StaticResource MaterialDesignOutlinedPasswordBox}"
                            Margin="0,0,0,4"
                            PasswordChanged="ConfirmPasswordBox_OnPasswordChanged"/>
                
                <TextBlock Text="{Binding ConfirmPasswordError}"
                          Foreground="{DynamicResource MaterialDesignValidationErrorBrush}"
                          FontSize="12"
                          Margin="0,0,0,12"
                          TextWrapping="Wrap"
                          Visibility="{Binding ConfirmPasswordError, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- General Error Message -->
                <TextBlock Text="{Binding ErrorMessage}"
                          Foreground="{DynamicResource MaterialDesignValidationErrorBrush}"
                          TextWrapping="Wrap"
                          Margin="0,0,0,16"
                          Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Register Button -->
                <Button Content="CREATE ACCOUNT"
                       Command="{Binding RegisterCommand}"
                       Style="{StaticResource MaterialDesignRaisedButton}"
                       IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"
                       Margin="0,0,0,16"/>

                <!-- Progress Bar -->
                <ProgressBar IsIndeterminate="True"
                            Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Margin="0,0,0,16"/>

                <!-- Login Link -->
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Center">
                    <TextBlock Text="Already have an account? " 
                              Style="{StaticResource MaterialDesignBody2TextBlock}"/>
                    <Button Content="Sign In"
                           Command="{Binding NavigateToLoginCommand}"
                           Style="{StaticResource MaterialDesignFlatButton}"
                           Padding="4,0"/>
                </StackPanel>
            </StackPanel>
        </materialDesign:Card>
    </Grid>
</UserControl>
